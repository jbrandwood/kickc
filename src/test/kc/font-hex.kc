// Creates a font where each char contains the number of the char (00-ff)

import "c64"
import "string"

byte* SCREEN = 0x0400;
byte* CHARSET = 0x2000;

void main() {
    *D018 = toD018(SCREEN, CHARSET);

    // Make charset from proto chars
    byte* charset = CHARSET;
    byte* proto_hi = FONT_HEX_PROTO;
    for( byte c: 0..15 ) {
        byte* proto_lo = FONT_HEX_PROTO;
        for( byte c: 0..15 ) {
            for( byte i: 0..4) {
                charset[i] = proto_hi[i]<<3 | proto_lo[i];
            }
            charset[5] = 0;
            charset[6] = 0;
            charset[7] = 0;
            proto_lo += 5;
            charset += 8;
        }
        proto_hi += 5;
    }

    // Show all chars on screen
    for (byte c: 0..255) {
        SCREEN[c] = c;
    }

}

// Bit patterns for symbols 0-f (3x5 pixels)
byte[] FONT_HEX_PROTO = {
    // 0
    0b010,
    0b101,
    0b101,
    0b101,
    0b010,
    // 1
    0b110,
    0b010,
    0b010,
    0b010,
    0b111,
    // 2
    0b110,
    0b001,
    0b010,
    0b100,
    0b111,
    // 3
    0b110,
    0b001,
    0b010,
    0b001,
    0b110,
    // 4
    0b101,
    0b101,
    0b111,
    0b001,
    0b001,
    // 5
    0b111,
    0b100,
    0b110,
    0b001,
    0b110,
    // 6
    0b011,
    0b100,
    0b110,
    0b101,
    0b010,
    // 7
    0b111,
    0b001,
    0b001,
    0b001,
    0b001,
    // 8
    0b010,
    0b101,
    0b010,
    0b101,
    0b010,
    // 9
    0b010,
    0b101,
    0b011,
    0b001,
    0b001,
    // a
    0b010,
    0b101,
    0b111,
    0b101,
    0b101,
    // b
    0b110,
    0b101,
    0b110,
    0b101,
    0b110,
    // c
    0b011,
    0b100,
    0b100,
    0b100,
    0b011,
    // d
    0b110,
    0b101,
    0b101,
    0b101,
    0b110,
    // e
    0b111,
    0b100,
    0b111,
    0b100,
    0b111,
    // f
    0b111,
    0b100,
    0b111,
    0b100,
    0b100
};
