const nomodify byte BLACK = 0
const nomodify byte* D011 = (byte*) 53265
const nomodify byte GREEN = 5
const byte OFFSET_STRUCT_MOS6569_VICII_BORDER_COLOR = $20
const byte OFFSET_STRUCT_MOS6569_VICII_RASTER = $12
const byte OFFSET_STRUCT_MOS6569_VICII_SPRITES_ENABLE = $15
const nomodify byte PLEX_COUNT = $20
const byte* PLEX_FREE_YPOS[8]  = { fill( 8, 0) }
const byte* PLEX_PTR[PLEX_COUNT]  = { fill( PLEX_COUNT, 0) }
byte* PLEX_SCREEN_PTR
const byte* PLEX_SCREEN_PTR#0 PLEX_SCREEN_PTR = SCREEN+$3f8
const byte* PLEX_SORTED_IDX[PLEX_COUNT]  = { fill( PLEX_COUNT, 0) }
const word* PLEX_XPOS[PLEX_COUNT]  = { fill( PLEX_COUNT, 0) }
const byte* PLEX_YPOS[PLEX_COUNT]  = { fill( PLEX_COUNT, 0) }
const byte* SCREEN = (byte*) 1024
const byte* SPRITE[]  = kickasm {{ .var pic = LoadPicture("balloon.png", List().add($000000, $ffffff))
    .for (var y=0; y<21; y++)
        .for (var x=0;x<3; x++)
            .byte pic.getSinglecolorByte(x,y)
 }}
const nomodify byte* SPRITES_COLOR = (byte*) 53287
const nomodify byte* SPRITES_XMSB = (byte*) 53264
const nomodify byte* SPRITES_XPOS = (byte*) 53248
const nomodify byte* SPRITES_YPOS = (byte*) 53249
const nomodify struct MOS6569_VICII* VICII = (struct MOS6569_VICII*) 53248
const nomodify byte VIC_DEN = $10
const nomodify byte VIC_RSEL = 8
const nomodify byte VIC_RST8 = $80
const byte* YSIN[$100]  = kickasm {{ .var min = 50
    .var max = 250-21
    .var ampl = max-min;
    .for(var i=0;i<256;i++)
        .byte round(min+(ampl/2)+(ampl/2)*sin(toRadians(360*i/256)))
 }}
void __start()
void init()
byte~ init::$3 reg byte a 2002.0
byte init::ss
byte init::ss#1 reg byte x 1501.5
byte init::ss#2 reg byte x 1501.5
byte init::sx
byte init::sx#1 reg byte x 1501.5
byte init::sx#2 reg byte x 800.8
word init::xp
word init::xp#1 xp zp[2]:2 667.3333333333334
word init::xp#2 xp zp[2]:2 750.75
void loop()
byte~ loop::$5 reg byte a 20002.0
byte loop::plexFreeNextYpos1_return
byte loop::plexFreeNextYpos1_return#0 plexFreeNextYpos1_return zp[1]:10 55001.0
byte loop::rasterY
byte loop::sin_idx
byte loop::sin_idx#1 sin_idx zp[1]:4 133.46666666666667
byte loop::sin_idx#6 sin_idx zp[1]:4 333.6666666666667
byte loop::ss
byte loop::ss#1 ss zp[1]:5 15001.5
byte loop::ss#5 ss zp[1]:5 3333.6666666666665
byte loop::sy
byte loop::sy#1 reg byte y 15001.5
byte loop::sy#2 reg byte y 10001.0
byte loop::y_idx
byte loop::y_idx#1 reg byte x 6667.333333333333
byte loop::y_idx#2 reg byte x 15502.0
byte loop::y_idx#3 reg byte x 2002.0
void main()
void plexInit(byte* plexInit::screen)
byte plexInit::i
byte plexInit::i#1 reg byte x 15001.5
byte plexInit::i#2 reg byte x 20002.0
byte* plexInit::plexSetScreen1_screen
byte* plexInit::screen
void plexShowSprite()
byte~ plexShowSprite::$11 reg byte x 100001.0
byte~ plexShowSprite::$2 reg byte a 200002.0
byte~ plexShowSprite::$3 reg byte a 200002.0
byte~ plexShowSprite::$5 reg byte x 200002.0
byte~ plexShowSprite::$6 reg byte a 200002.0
byte~ plexShowSprite::$9 reg byte a 200002.0
byte~ plexShowSprite::plexFreeAdd1_$0 reg byte a 200002.0
byte~ plexShowSprite::plexFreeAdd1_$1 reg byte x 200002.0
byte~ plexShowSprite::plexFreeAdd1_$2 reg byte a 200002.0
byte plexShowSprite::plexFreeAdd1_ypos
byte plexShowSprite::plexFreeAdd1_ypos#0 reg byte a 150001.5
byte plexShowSprite::plex_sprite_idx2
byte plexShowSprite::plex_sprite_idx2#0 plex_sprite_idx2 zp[1]:12 25000.25
byte plexShowSprite::xpos_idx
byte plexShowSprite::xpos_idx#0 reg byte a 200002.0
byte plexShowSprite::ypos
void plexSort()
byte plexSort::m
byte plexSort::m#1 m zp[1]:10 1500001.5
byte plexSort::m#2 m zp[1]:10 416667.0833333334
byte plexSort::nxt_idx
byte plexSort::nxt_idx#0 nxt_idx zp[1]:12 300000.30000000005
byte plexSort::nxt_y
byte plexSort::nxt_y#0 nxt_y zp[1]:11 1500000.375
byte plexSort::plexFreePrepare1_s
byte plexSort::plexFreePrepare1_s#1 reg byte x 1500001.5
byte plexSort::plexFreePrepare1_s#2 reg byte x 1500001.5
byte plexSort::s
byte plexSort::s#1 reg byte x 1.3666668333333332E7
byte plexSort::s#2 reg byte x 2000002.0
byte plexSort::s#3 reg byte x 2.05000025E7
byte plexSort::s#6 reg byte x 2000002.0
volatile byte plex_free_next loadstore zp[1]:9 8421.236842105263
volatile byte plex_show_idx loadstore zp[1]:6 10625.166666666664
volatile byte plex_sprite_idx loadstore zp[1]:7 9111.266666666666
volatile byte plex_sprite_msb loadstore zp[1]:8 13261.065217391306

reg byte x [ init::sx#2 init::sx#1 ]
zp[2]:2 [ init::xp#2 init::xp#1 ]
reg byte x [ init::ss#2 init::ss#1 ]
zp[1]:4 [ loop::sin_idx#6 loop::sin_idx#1 ]
reg byte x [ loop::y_idx#2 loop::y_idx#3 loop::y_idx#1 ]
reg byte y [ loop::sy#2 loop::sy#1 ]
zp[1]:5 [ loop::ss#5 loop::ss#1 ]
reg byte x [ plexInit::i#2 plexInit::i#1 ]
reg byte x [ plexSort::s#3 plexSort::s#1 plexSort::s#6 ]
reg byte x [ plexSort::plexFreePrepare1_s#2 plexSort::plexFreePrepare1_s#1 ]
zp[1]:6 [ plex_show_idx ]
zp[1]:7 [ plex_sprite_idx ]
zp[1]:8 [ plex_sprite_msb ]
zp[1]:9 [ plex_free_next ]
reg byte a [ init::$3 ]
reg byte a [ loop::$5 ]
zp[1]:10 [ loop::plexFreeNextYpos1_return#0 plexSort::m#2 plexSort::m#1 ]
zp[1]:11 [ plexSort::nxt_y#0 ]
reg byte x [ plexSort::s#2 ]
zp[1]:12 [ plexShowSprite::plex_sprite_idx2#0 plexSort::nxt_idx#0 ]
reg byte a [ plexShowSprite::plexFreeAdd1_ypos#0 ]
reg byte a [ plexShowSprite::plexFreeAdd1_$0 ]
reg byte x [ plexShowSprite::plexFreeAdd1_$1 ]
reg byte a [ plexShowSprite::plexFreeAdd1_$2 ]
reg byte a [ plexShowSprite::xpos_idx#0 ]
reg byte x [ plexShowSprite::$11 ]
reg byte a [ plexShowSprite::$2 ]
reg byte a [ plexShowSprite::$3 ]
reg byte a [ plexShowSprite::$9 ]
reg byte x [ plexShowSprite::$5 ]
reg byte a [ plexShowSprite::$6 ]
